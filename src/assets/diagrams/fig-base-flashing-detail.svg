<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 760 640">
  <defs>
    <style>
      .label { font-family: -apple-system, system-ui, sans-serif; fill: #1a2e1a; font-size: 12px; }
      .label-sm { font-family: -apple-system, system-ui, sans-serif; fill: #555; font-size: 11px; }
      .label-bold { font-family: -apple-system, system-ui, sans-serif; fill: #1a2e1a; font-size: 12px; font-weight: 600; }
      .dim { font-family: -apple-system, system-ui, sans-serif; fill: #c9a227; font-size: 11px; font-weight: 600; }
      .dim-line { stroke: #c9a227; stroke-width: 1; fill: none; }
      .struct { stroke: #1a2e1a; stroke-width: 2; fill: none; }
      .epdm { fill: #1a1a1a; }
      .epdm-line { stroke: #1a1a1a; stroke-width: 3; fill: none; }
      .straw-clay { fill: #d4b46a; stroke: #b89848; stroke-width: 0.5; }
      .burlap { stroke: #8b7355; stroke-width: 2; stroke-dasharray: 4,2; fill: none; }
      .wattle { fill: #c49a5a; stroke: #a07030; stroke-width: 1; }
      .pole { fill: #8b6914; stroke: #5a4510; stroke-width: 1.5; }
      .stone { fill: #ccc; stroke: #999; stroke-width: 1; }
      .stone-skirt { fill: #b0a890; stroke: #8a7e60; stroke-width: 1; }
      .gabion-fill { fill: #d5cfc5; }
      .mesh { stroke: #888; stroke-width: 0.8; fill: none; }
      .ground-fill { fill: #f0ebe3; }
      .geotextile { stroke: #6a9a6a; stroke-width: 2.5; stroke-dasharray: 6,2; fill: none; }
      .pipe { fill: #e0e0e0; stroke: #666; stroke-width: 1.5; }
      .gravel-bed { fill: #bbb; stroke: #999; stroke-width: 0.6; }
      .timber { fill: #a07030; stroke: #6a4a20; stroke-width: 1; }
      .steel { fill: #aab; stroke: #667; stroke-width: 1; }
      .water-arrow { stroke: #4a8acd; stroke-width: 2; fill: #4a8acd; marker-end: url(#water-end); }
      .callout { stroke: #1a2e1a; stroke-width: 0.7; opacity: 0.5; fill: none; }
      .zone-bg { opacity: 0.08; }
    </style>
    <marker id="a-s" markerWidth="8" markerHeight="6" refX="0" refY="3" orient="auto">
      <path d="M8,0 L0,3 L8,6" stroke="#c9a227" fill="none" stroke-width="1"/>
    </marker>
    <marker id="a-e" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <path d="M0,0 L8,3 L0,6" stroke="#c9a227" fill="none" stroke-width="1"/>
    </marker>
    <marker id="water-end" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
      <path d="M0,0 L8,3 L0,6 Z" fill="#4a8acd"/>
    </marker>
  </defs>

  <!-- Scale: 5px/cm. Ground at y=400. Gabion top at y=250 (30cm above grade). -->
  <!-- Gabion: inner face x=180, outer face x=380 (40cm = 200px) -->
  <!-- Focus: outer 25cm of gabion + exterior layers -->

  <!-- Title -->
  <text x="380" y="24" text-anchor="middle" class="label" style="font-size:15px; font-weight:700;">Base Flashing Detail â€” Drain + Gabion + Membrane Junction</text>
  <text x="380" y="42" text-anchor="middle" class="label-sm">Vertical cross-section through dome base, interior (left) to exterior (right)</text>

  <!-- Earth / ground fill -->
  <rect x="30" y="400" width="700" height="240" class="ground-fill"/>

  <!-- Trench excavation (lighter fill) -->
  <rect x="170" y="400" width="220" height="195" fill="#f5f0e8"/>

  <!-- Ground level line -->
  <line x1="30" y1="400" x2="170" y2="400" stroke="#1a2e1a" stroke-width="1.5"/>
  <line x1="390" y1="400" x2="730" y2="400" stroke="#1a2e1a" stroke-width="1.5"/>
  <text x="157" y="397" text-anchor="end" class="label-sm" style="font-size:10px;">grade</text>

  <!-- ===== BELOW GROUND: DRAIN + GABION ===== -->

  <!-- Geotextile liner (trench sides and bottom) -->
  <path d="M175,255 L175,590 L385,590 L385,255" class="geotextile"/>

  <!-- Gravel bed (50mm = 25px, at trench bottom y=570 to y=595) -->
  <circle cx="210" cy="582" r="3" class="gravel-bed"/>
  <circle cx="225" cy="586" r="2.5" class="gravel-bed"/>
  <circle cx="240" cy="580" r="3" class="gravel-bed"/>
  <circle cx="255" cy="585" r="2.5" class="gravel-bed"/>
  <circle cx="270" cy="582" r="3" class="gravel-bed"/>
  <circle cx="285" cy="587" r="2.5" class="gravel-bed"/>
  <circle cx="300" cy="581" r="3" class="gravel-bed"/>
  <circle cx="315" cy="586" r="2.5" class="gravel-bed"/>
  <circle cx="330" cy="583" r="3" class="gravel-bed"/>
  <circle cx="345" cy="578" r="2.5" class="gravel-bed"/>
  <circle cx="360" cy="584" r="3" class="gravel-bed"/>
  <circle cx="375" cy="580" r="2.5" class="gravel-bed"/>

  <!-- Perforated drain pipe (100mm = 50px diameter) -->
  <circle cx="280" cy="565" r="25" class="pipe"/>
  <circle cx="268" cy="580" r="1.5" fill="#999"/>
  <circle cx="276" cy="584" r="1.5" fill="#999"/>
  <circle cx="284" cy="584" r="1.5" fill="#999"/>
  <circle cx="292" cy="580" r="1.5" fill="#999"/>

  <!-- Gabion cage outline -->
  <rect x="180" y="250" width="200" height="345" fill="none" stroke="#1a2e1a" stroke-width="2"/>

  <!-- Wire mesh pattern (sparse for clarity) -->
  <line x1="180" y1="300" x2="380" y2="300" class="mesh"/>
  <line x1="180" y1="350" x2="380" y2="350" class="mesh"/>
  <line x1="180" y1="400" x2="380" y2="400" class="mesh"/>
  <line x1="180" y1="450" x2="380" y2="450" class="mesh"/>
  <line x1="180" y1="500" x2="380" y2="500" class="mesh"/>
  <line x1="230" y1="250" x2="230" y2="595" class="mesh"/>
  <line x1="280" y1="250" x2="280" y2="530" class="mesh"/>
  <line x1="330" y1="250" x2="330" y2="595" class="mesh"/>

  <!-- Stone fill in gabion (selection, above pipe) -->
  <ellipse cx="210" cy="430" rx="14" ry="10" class="stone"/>
  <ellipse cx="250" cy="420" rx="13" ry="9" class="stone"/>
  <ellipse cx="310" cy="425" rx="14" ry="10" class="stone"/>
  <ellipse cx="355" cy="418" rx="12" ry="9" class="stone"/>
  <ellipse cx="200" cy="470" rx="12" ry="8" class="stone"/>
  <ellipse cx="240" cy="465" rx="13" ry="10" class="stone"/>
  <ellipse cx="290" cy="468" rx="14" ry="9" class="stone"/>
  <ellipse cx="340" cy="462" rx="12" ry="9" class="stone"/>
  <ellipse cx="370" cy="470" rx="10" ry="8" class="stone"/>
  <ellipse cx="220" cy="510" rx="12" ry="9" class="stone"/>
  <ellipse cx="260" cy="505" rx="13" ry="8" class="stone"/>
  <ellipse cx="330" cy="508" rx="12" ry="9" class="stone"/>
  <ellipse cx="365" cy="512" rx="10" ry="8" class="stone"/>
  <!-- Upper stones -->
  <ellipse cx="205" cy="320" rx="13" ry="9" class="stone"/>
  <ellipse cx="245" cy="325" rx="14" ry="10" class="stone"/>
  <ellipse cx="300" cy="318" rx="13" ry="9" class="stone"/>
  <ellipse cx="348" cy="322" rx="12" ry="9" class="stone"/>
  <ellipse cx="215" cy="370" rx="12" ry="9" class="stone"/>
  <ellipse cx="255" cy="375" rx="14" ry="10" class="stone"/>
  <ellipse cx="310" cy="368" rx="13" ry="9" class="stone"/>
  <ellipse cx="360" cy="372" rx="11" ry="8" class="stone"/>
  <!-- Highest stones -->
  <ellipse cx="200" cy="275" rx="12" ry="8" class="stone"/>
  <ellipse cx="235" cy="280" rx="13" ry="9" class="stone"/>
  <ellipse cx="290" cy="273" rx="14" ry="9" class="stone"/>
  <ellipse cx="340" cy="278" rx="12" ry="8" class="stone"/>
  <ellipse cx="370" cy="274" rx="10" ry="7" class="stone"/>

  <!-- Geotextile fold-over on top of gabion -->
  <path d="M180,255 L240,255" class="geotextile" stroke-width="3"/>
  <path d="M320,255 L380,255" class="geotextile" stroke-width="3"/>

  <!-- Flat bearing stones on gabion top -->
  <rect x="180" y="250" width="65" height="15" rx="2" style="fill:#b0a890; stroke:#8a7e60; stroke-width:1;"/>
  <rect x="320" y="250" width="60" height="15" rx="2" style="fill:#b0a890; stroke:#8a7e60; stroke-width:1;"/>

  <!-- ===== POLE SOCKET + POLE ===== -->
  <!-- Socket void in gabion (12cm wide = 60px) -->
  <rect x="248" y="248" width="60" height="130" fill="#faf8f5"/>
  <rect x="248" y="248" width="60" height="130" fill="none" stroke="#1a2e1a" stroke-width="1" stroke-dasharray="4,3"/>

  <!-- Pole (8cm = 40px wide), rises from socket -->
  <rect x="258" y="60" width="40" height="310" rx="5" class="pole"/>

  <!-- Gravel packing in socket around pole -->
  <circle cx="253" cy="290" r="2.5" class="gravel-bed"/>
  <circle cx="253" cy="310" r="2.5" class="gravel-bed"/>
  <circle cx="253" cy="330" r="2.5" class="gravel-bed"/>
  <circle cx="253" cy="350" r="2.5" class="gravel-bed"/>
  <circle cx="303" cy="290" r="2.5" class="gravel-bed"/>
  <circle cx="303" cy="310" r="2.5" class="gravel-bed"/>
  <circle cx="303" cy="330" r="2.5" class="gravel-bed"/>
  <circle cx="303" cy="350" r="2.5" class="gravel-bed"/>

  <!-- ===== DOME WALL LAYERS (above gabion, nearly vertical at base) ===== -->
  <!-- Show from gabion top (y=250) upward to y=60 -->
  <!-- Layers from inside (left) to outside (right): wattle | straw-clay | burlap | EPDM -->

  <!-- Wattle zone (behind pole to just outside it, 6cm total width) -->
  <rect x="240" y="60" width="70" height="190" class="wattle" rx="1"/>

  <!-- Straw-clay (100mm = 50px, outside the wattle) -->
  <rect x="310" y="60" width="50" height="200" class="straw-clay"/>
  <!-- Straw fiber marks -->
  <line x1="315" y1="80" x2="330" y2="78" stroke="#b89848" stroke-width="0.7" opacity="0.5"/>
  <line x1="318" y1="110" x2="340" y2="108" stroke="#b89848" stroke-width="0.7" opacity="0.5"/>
  <line x1="312" y1="140" x2="335" y2="142" stroke="#b89848" stroke-width="0.7" opacity="0.5"/>
  <line x1="320" y1="170" x2="345" y2="168" stroke="#b89848" stroke-width="0.7" opacity="0.5"/>
  <line x1="314" y1="200" x2="338" y2="202" stroke="#b89848" stroke-width="0.7" opacity="0.5"/>
  <line x1="322" y1="230" x2="350" y2="228" stroke="#b89848" stroke-width="0.7" opacity="0.5"/>

  <!-- Burlap (thin dashed line just outside straw-clay) -->
  <line x1="362" y1="60" x2="362" y2="260" class="burlap"/>

  <!-- EPDM membrane running down the dome wall -->
  <line x1="366" y1="58" x2="366" y2="250" class="epdm-line"/>

  <!-- ===== BASE FLASHING: EPDM turns right across gabion top, then laps down ===== -->
  <!-- EPDM runs from wall (x=366) across gabion top to outer face (x=380), then 10cm (50px) down -->
  <path d="M366,250 L380,250 L380,300" class="epdm-line" stroke-linejoin="round"/>

  <!-- Timber batten embedded in gabion top at outer edge (5cm = 25px square) -->
  <rect x="370" y="252" width="12" height="20" class="timber"/>

  <!-- Termination bar (stainless steel, small rectangle clamping EPDM to outer face) -->
  <rect x="376" y="296" width="8" height="3" class="steel"/>
  <!-- Screw through bar into batten -->
  <line x1="380" y1="298" x2="380" y2="270" stroke="#667" stroke-width="1" stroke-dasharray="2,2"/>

  <!-- ===== STONE SKIRT (against outer face, 20cm = 100px thick, shown ~35cm = 175px tall) ===== -->
  <!-- From gabion outer face (x=380) to x=480, from gabion top (y=250) upward to y=75 -->
  <rect x="383" y="78" width="100" height="322" rx="2" fill="none" stroke="#8a7e60" stroke-width="1.5"/>
  <!-- Individual stones in the skirt -->
  <ellipse cx="410" cy="110" rx="18" ry="12" class="stone-skirt"/>
  <ellipse cx="450" cy="108" rx="16" ry="10" class="stone-skirt"/>
  <ellipse cx="430" cy="140" rx="20" ry="13" class="stone-skirt"/>
  <ellipse cx="470" cy="138" rx="12" ry="10" class="stone-skirt"/>
  <ellipse cx="400" cy="145" rx="14" ry="10" class="stone-skirt"/>
  <ellipse cx="415" cy="172" rx="18" ry="12" class="stone-skirt"/>
  <ellipse cx="458" cy="170" rx="16" ry="11" class="stone-skirt"/>
  <ellipse cx="435" cy="202" rx="20" ry="13" class="stone-skirt"/>
  <ellipse cx="468" cy="200" rx="14" ry="10" class="stone-skirt"/>
  <ellipse cx="400" cy="205" rx="14" ry="10" class="stone-skirt"/>
  <ellipse cx="420" cy="235" rx="18" ry="12" class="stone-skirt"/>
  <ellipse cx="460" cy="232" rx="16" ry="11" class="stone-skirt"/>
  <ellipse cx="408" cy="265" rx="16" ry="12" class="stone-skirt"/>
  <ellipse cx="448" cy="262" rx="18" ry="11" class="stone-skirt"/>
  <ellipse cx="475" cy="268" rx="10" ry="8" class="stone-skirt"/>
  <ellipse cx="415" cy="295" rx="18" ry="12" class="stone-skirt"/>
  <ellipse cx="455" cy="292" rx="16" ry="11" class="stone-skirt"/>
  <ellipse cx="430" cy="325" rx="20" ry="13" class="stone-skirt"/>
  <ellipse cx="468" cy="322" rx="14" ry="10" class="stone-skirt"/>
  <ellipse cx="400" cy="330" rx="13" ry="10" class="stone-skirt"/>
  <ellipse cx="420" cy="360" rx="18" ry="12" class="stone-skirt"/>
  <ellipse cx="460" cy="358" rx="16" ry="11" class="stone-skirt"/>
  <ellipse cx="440" cy="388" rx="20" ry="12" class="stone-skirt"/>
  <ellipse cx="405" cy="392" rx="14" ry="10" class="stone-skirt"/>
  <ellipse cx="472" cy="390" rx="12" ry="9" class="stone-skirt"/>
  <!-- Flat capstone on top of stone skirt -->
  <rect x="383" y="75" width="100" height="12" rx="2" style="fill:#a09880; stroke:#8a7e60; stroke-width:1.5;"/>
  <!-- Indication skirt continues upward -->
  <text x="433" y="68" text-anchor="middle" class="label-sm" style="font-size:9px; font-style:italic;">continues to 80cm...</text>

  <!-- ===== WATER FLOW ARROWS ===== -->
  <!-- Rain runs down EPDM -->
  <line x1="374" y1="95" x2="374" y2="140" class="water-arrow"/>
  <!-- Rain flows along base flashing -->
  <path d="M374,225 L374,250 L386,250" stroke="#4a8acd" stroke-width="2" fill="none" marker-end="url(#water-end)"/>
  <!-- Rain drips off outer face -->
  <line x1="386" y1="310" x2="386" y2="355" class="water-arrow"/>
  <!-- Water label -->
  <text x="393" y="340" class="label-sm" style="fill:#4a8acd; font-weight:600; font-size:10px;">rain</text>
  <text x="393" y="352" class="label-sm" style="fill:#4a8acd; font-size:9px;">sheds away</text>

  <!-- ===== DIMENSION LINES ===== -->
  <!-- EPDM lap: 10cm over outer face -->
  <line x1="395" y1="250" x2="395" y2="300" class="dim-line" marker-start="url(#a-s)" marker-end="url(#a-e)"/>
  <text x="400" y="280" class="dim" style="font-size:10px;">10cm</text>
  <text x="400" y="291" class="dim" style="font-size:9px;">lap</text>

  <!-- Straw-clay: 100mm -->
  <line x1="310" y1="54" x2="360" y2="54" class="dim-line" marker-start="url(#a-s)" marker-end="url(#a-e)"/>
  <text x="335" y="50" text-anchor="middle" class="dim" style="font-size:10px;">100mm</text>

  <!-- Stone skirt thickness: 20cm -->
  <line x1="383" y1="72" x2="483" y2="72" class="dim-line" marker-start="url(#a-s)" marker-end="url(#a-e)"/>
  <text x="433" y="68" text-anchor="middle" class="dim" style="font-size:10px;">20cm stone</text>

  <!-- ===== LABELS WITH CALLOUT LINES ===== -->

  <!-- Left-side labels -->
  <text x="50" y="88" class="label-bold">Dome wall layers</text>
  <text x="50" y="103" class="label-sm">(inside to outside)</text>
  <line x1="160" y1="96" x2="237" y2="96" class="callout"/>

  <text x="50" y="140" class="label-bold" style="fill:#8b6914;">Arch pole</text>
  <text x="50" y="154" class="label-sm">8-10cm eucalyptus</text>
  <line x1="120" y1="148" x2="255" y2="148" class="callout"/>

  <text x="50" y="190" class="label-bold" style="fill:#c49a5a;">Wattle</text>
  <line x1="88" y1="186" x2="238" y2="186" class="callout"/>

  <text x="50" y="225" class="label-bold" style="fill:#b89848;">Straw-clay</text>
  <text x="50" y="239" class="label-sm">100mm insulation</text>
  <line x1="130" y1="232" x2="308" y2="232" class="callout"/>

  <text x="50" y="270" class="label-bold">EPDM membrane</text>
  <text x="50" y="284" class="label-sm">1.5mm, with burlap beneath</text>
  <line x1="185" y1="278" x2="364" y2="262" class="callout"/>

  <!-- Termination bar label -->
  <text x="50" y="320" class="label-bold" style="fill:#667;">Termination bar</text>
  <text x="50" y="334" class="label-sm">SS bar + timber batten</text>
  <text x="50" y="348" class="label-sm">screwed into gabion top</text>
  <line x1="185" y1="340" x2="374" y2="297" class="callout"/>

  <!-- Geotextile fold-over -->
  <text x="50" y="390" class="label-bold" style="fill:#6a9a6a;">Geotextile fold-over</text>
  <text x="50" y="404" class="label-sm" style="fill:#6a9a6a;">seals top of stone fill</text>
  <line x1="185" y1="398" x2="238" y2="257" class="callout" style="stroke:#6a9a6a;"/>

  <!-- Right-side labels -->
  <text x="520" y="100" class="label-bold" style="fill:#8a7e60;">Stone skirt</text>
  <text x="520" y="114" class="label-sm">dry-stacked granite/schist</text>
  <text x="520" y="128" class="label-sm">60-80cm above gabion</text>
  <line x1="518" y1="106" x2="486" y2="106" class="callout"/>

  <text x="520" y="170" class="label-bold" style="fill:#8a7e60;">Flat capstones</text>
  <text x="520" y="184" class="label-sm">shed water outward</text>
  <line x1="518" y1="176" x2="486" y2="82" class="callout"/>

  <text x="520" y="255" class="label-bold">Gabion outer face</text>
  <text x="520" y="269" class="label-sm">EPDM laps 10cm down</text>
  <line x1="518" y1="262" x2="384" y2="280" class="callout"/>

  <text x="520" y="340" class="label-bold">Gabion cage</text>
  <text x="520" y="354" class="label-sm">3mm galv. wire mesh</text>
  <text x="520" y="368" class="label-sm">stone-filled</text>
  <line x1="518" y1="350" x2="382" y2="350" class="callout"/>

  <text x="520" y="430" class="label-bold" style="fill:#6a9a6a;">Geotextile liner</text>
  <text x="520" y="444" class="label-sm">wraps trench, lines cage</text>
  <line x1="518" y1="438" x2="388" y2="438" class="callout" style="stroke:#6a9a6a;"/>

  <text x="520" y="500" class="label-bold">Gravel bed + pipe</text>
  <text x="520" y="514" class="label-sm">100mm perf. HDPE</text>
  <text x="520" y="528" class="label-sm">on 50mm washed gravel</text>
  <line x1="518" y1="508" x2="307" y2="565" class="callout"/>

  <!-- Grade labels -->
  <text x="430" y="415" class="label-sm" style="font-size:10px; fill:#1a2e1a;">grade level</text>

  <!-- Interior / Exterior orientation -->
  <text x="130" y="620" text-anchor="middle" class="label" style="font-size:13px; font-weight:700; fill:#888;">INTERIOR</text>
  <path d="M80,614 L50,614" stroke="#888" stroke-width="1.5" marker-end="url(#water-end)"/>

  <text x="560" y="620" text-anchor="middle" class="label" style="font-size:13px; font-weight:700; fill:#888;">EXTERIOR</text>
  <path d="M610,614 L640,614" stroke="#888" stroke-width="1.5" marker-end="url(#water-end)"/>
</svg>
